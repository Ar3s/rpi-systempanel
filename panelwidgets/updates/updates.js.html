@!(model)
<div class="updates_grid"></div>
<script type="text/javascript">
    var sourceUpdates =
    {
        datatype: "array",
        localdata: [],
        datafields: [
            { name: 'name' },
            { name: 'old_version' },
            { name: 'new_version' }
        ]
    };
	$(document).ready(function () {        
        var dataAdapter = new $.jqx.dataAdapter(sourceUpdates);
        $("#@(model.user_widget.id_html) .updates_grid").jqxGrid(
        {
        	showdefaultloadelement: false,
        	autoshowloadelement: false,
            width: '100%',
            source: dataAdapter,
            theme: 'bootstrap',
            columnsresize: true,
            pageable: true,
            autoheight: true,
            columns: [
              { text: 'Package', dataField: 'name' },
              { text: 'Old Version', dataField: 'old_version' },
              { text: 'New Version', dataField: 'new_version' }
            ]
        });
        
        setTimeout(updateUpdatesGrid, 50);
	});
	   
	function callbackUpdateUpdatesGrid(data) {
        sourceUpdates.localdata = data.updates;
        $("#@(model.user_widget.id_html) .updates_grid").jqxGrid('updatebounddata', 'cells'); 
    }

    function updateUpdatesGrid() {
        $.startUpdatingWidgetJson(socket, @model.user_widget.id, '@model.sid', callbackUpdateUpdatesGrid, null);
    }
</script>